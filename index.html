<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans Thai', sans-serif; }
        .snippet-card:hover { transform: translateY(-2px); }
        .category-badge { transition: all 0.2s ease; }
        .search-highlight { background-color: #fef3c7; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">üìù ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢</h1>
            
            <!-- Add New Snippet -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
                <div class="lg:col-span-2">
                    <textarea id="newSnippetText" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö..." 
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none h-24"></textarea>
                </div>
                <div class="space-y-3">
                    <select id="categorySelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                    </select>
                    <button onclick="addSnippet()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors">
                        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                    </button>
                </div>
            </div>

            <!-- Category Management -->
            <div class="flex flex-wrap gap-3 mb-4">
                <button onclick="showCategoryModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    üè∑Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </button>
                <div id="categoryFilters" class="flex flex-wrap gap-2">
                    <button onclick="filterByCategory('all')" class="category-filter active bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium">
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                </div>
            </div>

            <!-- Search and Sort -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." 
                    class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    oninput="searchSnippets()">
                <select id="sortSelect" onchange="sortSnippets()" class="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <option value="usage">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°: ‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢</option>
                    <option value="updated">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</option>
                    <option value="name">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°: ‡∏ä‡∏∑‡πà‡∏≠ A-Z</option>
                </select>
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Snippets List -->
            <div class="lg:col-span-2">
                <div id="snippetsList" class="space-y-4">
                    <!-- Snippets will be rendered here -->
                </div>
                <div id="noResults" class="hidden text-center py-12 text-gray-500">
                    <div class="text-6xl mb-4">üì≠</div>
                    <p class="text-xl">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
                </div>
            </div>

            <!-- Paste Area -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6 sticky top-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">üìã ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</h3>
                    <textarea id="pasteArea" placeholder="‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡∏ß‡∏≤‡∏á' ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." 
                        class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none h-64"></textarea>
                    <div class="mt-4 space-y-2">
                        <button onclick="copyFromPasteArea()" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                        </button>
                        <button onclick="clearPasteArea()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Management Modal -->
    <div id="categoryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-semibold mb-4">üè∑Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
            
            <!-- Add Category -->
            <div class="mb-4">
                <input type="text" id="newCategoryName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà" 
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-2">
                <button onclick="addCategory()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                    ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </button>
            </div>

            <!-- Category List -->
            <div id="categoryList" class="space-y-2 mb-4 max-h-48 overflow-y-auto">
                <!-- Categories will be rendered here -->
            </div>

            <button onclick="closeCategoryModal()" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg">
                ‡∏õ‡∏¥‡∏î
            </button>
        </div>
    </div>

    <!-- Edit Snippet Modal -->
    <div id="editModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-lg mx-4">
            <h3 class="text-xl font-semibold mb-4">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</h3>
            <textarea id="editSnippetText" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none h-32 mb-4"></textarea>
            <select id="editCategorySelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-4">
                <option value="‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
            </select>
            <div class="flex gap-3">
                <button onclick="saveEdit()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
                    üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                </button>
                <button onclick="closeEditModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let snippets = JSON.parse(localStorage.getItem('textSnippets')) || [];
        let categories = JSON.parse(localStorage.getItem('categories')) || ['‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'];
        let currentFilter = 'all';
        let currentSort = 'usage';
        let editingId = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderCategories();
            renderCategoryFilters();
            renderSnippets();
        });

        // Add new snippet
        function addSnippet() {
            const text = document.getElementById('newSnippetText').value.trim();
            const category = document.getElementById('categorySelect').value;
            
            if (!text) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°');
                return;
            }

            const snippet = {
                id: Date.now(),
                text: text,
                category: category,
                usageCount: 0,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            snippets.push(snippet);
            saveData();
            document.getElementById('newSnippetText').value = '';
            renderSnippets();
        }

        // Render snippets
        function renderSnippets() {
            const container = document.getElementById('snippetsList');
            const noResults = document.getElementById('noResults');
            
            let filteredSnippets = [...snippets];
            
            // Apply category filter
            if (currentFilter !== 'all') {
                filteredSnippets = filteredSnippets.filter(s => s.category === currentFilter);
            }
            
            // Apply search filter
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (searchTerm) {
                filteredSnippets = filteredSnippets.filter(s => 
                    s.text.toLowerCase().includes(searchTerm)
                );
            }
            
            // Apply sorting
            filteredSnippets.sort((a, b) => {
                switch (currentSort) {
                    case 'usage':
                        return b.usageCount - a.usageCount;
                    case 'updated':
                        return new Date(b.updatedAt) - new Date(a.updatedAt);
                    case 'name':
                        return a.text.localeCompare(b.text, 'th');
                    default:
                        return 0;
                }
            });

            if (filteredSnippets.length === 0) {
                container.innerHTML = '';
                noResults.classList.remove('hidden');
                return;
            }

            noResults.classList.add('hidden');
            
            container.innerHTML = filteredSnippets.map(snippet => `
                <div class="snippet-card bg-white rounded-lg shadow-md p-4 transition-all duration-200 hover:shadow-lg">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center gap-2">
                            <span class="category-badge bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">
                                ${snippet.category}
                            </span>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">
                                ‡πÉ‡∏ä‡πâ ${snippet.usageCount} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                            </span>
                        </div>
                        <div class="flex gap-1">
                            <button onclick="editSnippet(${snippet.id})" class="text-blue-600 hover:text-blue-800 p-1 rounded" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="copySnippet(${snippet.id})" class="text-green-600 hover:text-green-800 p-1 rounded" title="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å">
                                üìã
                            </button>
                            <button onclick="pasteSnippet(${snippet.id})" class="text-purple-600 hover:text-purple-800 p-1 rounded" title="‡∏ß‡∏≤‡∏á">
                                üìù
                            </button>
                            <button onclick="deleteSnippet(${snippet.id})" class="text-red-600 hover:text-red-800 p-1 rounded" title="‡∏•‡∏ö">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-800 leading-relaxed ${searchTerm ? 'search-highlight-text' : ''}">${highlightSearch(snippet.text, searchTerm)}</p>
                    <div class="text-xs text-gray-500 mt-2">
                        ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: ${new Date(snippet.updatedAt).toLocaleDateString('th-TH')}
                    </div>
                </div>
            `).join('');
        }

        // Highlight search terms
        function highlightSearch(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<span class="search-highlight">$1</span>');
        }

        // Copy snippet to clipboard
        function copySnippet(id) {
            const snippet = snippets.find(s => s.id === id);
            if (snippet) {
                navigator.clipboard.writeText(snippet.text).then(() => {
                    snippet.usageCount++;
                    snippet.updatedAt = new Date().toISOString();
                    saveData();
                    renderSnippets();
                    showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß! üìã');
                });
            }
        }

        // Paste snippet to paste area
        function pasteSnippet(id) {
            const snippet = snippets.find(s => s.id === id);
            if (snippet) {
                document.getElementById('pasteArea').value = snippet.text;
                document.getElementById('pasteArea').focus();
                snippet.usageCount++;
                snippet.updatedAt = new Date().toISOString();
                saveData();
                renderSnippets();
                showToast('‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß! üìù');
            }
        }

        // Edit snippet
        function editSnippet(id) {
            const snippet = snippets.find(s => s.id === id);
            if (snippet) {
                editingId = id;
                document.getElementById('editSnippetText').value = snippet.text;
                document.getElementById('editCategorySelect').value = snippet.category;
                document.getElementById('editModal').classList.remove('hidden');
            }
        }

        // Save edit
        function saveEdit() {
            const text = document.getElementById('editSnippetText').value.trim();
            const category = document.getElementById('editCategorySelect').value;
            
            if (!text) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°');
                return;
            }

            const snippet = snippets.find(s => s.id === editingId);
            if (snippet) {
                snippet.text = text;
                snippet.category = category;
                snippet.updatedAt = new Date().toISOString();
                saveData();
                renderSnippets();
                closeEditModal();
                showToast('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß! ‚úèÔ∏è');
            }
        }

        // Delete snippet
        function deleteSnippet(id) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                snippets = snippets.filter(s => s.id !== id);
                saveData();
                renderSnippets();
                showToast('‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß! üóëÔ∏è');
            }
        }

        // Category management
        function addCategory() {
            const name = document.getElementById('newCategoryName').value.trim();
            if (!name) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà');
                return;
            }
            if (categories.includes(name)) {
                alert('‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            categories.push(name);
            saveData();
            renderCategories();
            renderCategoryFilters();
            document.getElementById('newCategoryName').value = '';
            showToast('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß! üè∑Ô∏è');
        }

        function deleteCategory(name) {
            if (name === '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ') {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà "‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ" ‡πÑ‡∏î‡πâ');
                return;
            }
            
            if (confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà "${name}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ "‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ"`)) {
                // Move snippets to default category
                snippets.forEach(snippet => {
                    if (snippet.category === name) {
                        snippet.category = '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                    }
                });
                
                categories = categories.filter(c => c !== name);
                saveData();
                renderCategories();
                renderCategoryFilters();
                renderSnippets();
                showToast('‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß! üóëÔ∏è');
            }
        }

        function renameCategory(oldName) {
            const newName = prompt('‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà:', oldName);
            if (!newName || newName === oldName) return;
            
            if (categories.includes(newName)) {
                alert('‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                return;
            }
            
            // Update category name
            const index = categories.indexOf(oldName);
            categories[index] = newName;
            
            // Update snippets
            snippets.forEach(snippet => {
                if (snippet.category === oldName) {
                    snippet.category = newName;
                }
            });
            
            saveData();
            renderCategories();
            renderCategoryFilters();
            renderSnippets();
            showToast('‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß! ‚úèÔ∏è');
        }

        // Render functions
        function renderCategories() {
            const selects = [document.getElementById('categorySelect'), document.getElementById('editCategorySelect')];
            const categoryList = document.getElementById('categoryList');
            
            selects.forEach(select => {
                select.innerHTML = categories.map(cat => 
                    `<option value="${cat}">${cat}</option>`
                ).join('');
            });
            
            if (categoryList) {
                categoryList.innerHTML = categories.map(cat => `
                    <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
                        <span class="font-medium">${cat}</span>
                        <div class="flex gap-1">
                            <button onclick="renameCategory('${cat}')" class="text-blue-600 hover:text-blue-800 p-1" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠">
                                ‚úèÔ∏è
                            </button>
                            ${cat !== '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ' ? `
                                <button onclick="deleteCategory('${cat}')" class="text-red-600 hover:text-red-800 p-1" title="‡∏•‡∏ö">
                                    üóëÔ∏è
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            }
        }

        function renderCategoryFilters() {
            const container = document.getElementById('categoryFilters');
            container.innerHTML = `
                <button onclick="filterByCategory('all')" class="category-filter ${currentFilter === 'all' ? 'active bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'} px-3 py-1 rounded-full text-sm font-medium transition-colors">
                    ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
                ${categories.map(cat => `
                    <button onclick="filterByCategory('${cat}')" class="category-filter ${currentFilter === cat ? 'active bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'} px-3 py-1 rounded-full text-sm font-medium transition-colors">
                        ${cat}
                    </button>
                `).join('')}
            `;
        }

        // Filter and search functions
        function filterByCategory(category) {
            currentFilter = category;
            renderCategoryFilters();
            renderSnippets();
        }

        function searchSnippets() {
            renderSnippets();
        }

        function sortSnippets() {
            currentSort = document.getElementById('sortSelect').value;
            renderSnippets();
        }

        // Paste area functions
        function copyFromPasteArea() {
            const text = document.getElementById('pasteArea').value;
            if (text) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß! üìã');
                });
            }
        }

        function clearPasteArea() {
            document.getElementById('pasteArea').value = '';
        }

        // Modal functions
        function showCategoryModal() {
            document.getElementById('categoryModal').classList.remove('hidden');
            renderCategories();
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.add('hidden');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            editingId = null;
        }

        // Utility functions
        function saveData() {
            localStorage.setItem('textSnippets', JSON.stringify(snippets));
            localStorage.setItem('categories', JSON.stringify(categories));
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(-20px)';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                addSnippet();
            }
        });

        // Close modals on escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCategoryModal();
                closeEditModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96cea120e61845d0',t:'MTc1NDgxOTg1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
